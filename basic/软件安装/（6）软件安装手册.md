## 软件安装手册

> 所有软件都基于Linux安装

## Anaconda

安装结束后终端运行

```
jupyter notebook
```

安装Spyder的，直接终端输入

```
spyder
```



## linux安装docker

```
# 加载依赖包
sudo yum install -y yum-utils device-mapper-persistent-data lvm2 
# 设置阿里云镜像源
sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo 
# 安装 
sudo yum install docker-ce
```





## 虚拟机安装

>基本工具：SecureCRT （SSH终端）、 VMware（虚拟机）、Transmit（SFTP文件传输）

1、centos7 图形化与命令行切换

```
# 查看系统2种启动
cat /etc/inittab
# 查看当前模式
systemctl get-default
# 设置为命令行
systemctl set-default multi-user.target
# 重启即可
reboot
```

2、网络设置

第一步：进入虚拟机选择桥接模式里面的Wi-Fi

第二步：进入虚拟机终端给它设置静态IP，不然每次都是自动分配这样不方便后面做群聚使用

```
#命令行输出该工具即可
dhclient
#分配好的IP接下来绑定，进入配置
vim/etc/sysconfig/network-scripts/ifcfg-ens33
#将BOOTPROTO="static" 和 ONBOOT=yes 以及刚才设置的IP
BOOTPROTO="static"
ONBOOT=yes
IPADDR=
# 子网掩码
NETMASK:255.255.255.0
#网关
GATEWAY:192.168.0.1
#公网
DNS1:8.8.8.8
```

第三步：重启`systemctl restart network.service`

3、修改主机名称

```
vim /etc/hostname
```

4、主机名称映射

```
vim /etc/hosts
# 
172.16.64.131 hadoop10001
172.16.64.132 hadoop100
172.16.64.133 hadoop10003
172.16.64.134 hadoop10004
172.16.64.135 hadoop10005
```

4、防火墙关闭

```
#查看防火墙状态,执行后可以看到绿色字样标注的“active（running）”，说明防火墙是开启状态
systemctl status firewalld.service
#关闭运行的防火墙
systemctl stop firewalld.service
# 禁止防火墙服务器,上面的一旦重启自动开起的
systemctl disable firewalld.service
```

5、基本软件安装

（1）安装 epel-release

这是红帽系操作系统提供额外软件包

```
 yum install -y epel-release
```

（2）创建普通用户

```
useradd cathax
passwd cathax
vi /etc/sudpers
# 输入内容：cathax  ALL=(ALL)       NOPASSWD:ALL
```

6、克隆虚拟机

克隆完成之后需要修改这三个地方

```
# 修改IP地址
vim /etc/sysconfig/network-scripts/ifcfg-ens33
# 修改主机名称
vim /etc/hostname
# 这一步如果添加过就不需要改动，映射主机的
vim /etc/hosts
```

> 此时Linux集群已经成功搭建好了

7、安装JDK，选择在任意一台安装即可，其他使用分发方式进行分发

````
# 解压,-C指向/opt/model/意思就是安装在那个目录下
 tar -zxvf jdk-8u301-linux-x64.tar.gz -C /opt/module/
````

配置环境变量

```
# 现在配置JDK在该目录配置
cd /etc/profile.d
# 自己创建一个文件
sudo vim my_env_sh
# 配置如下
# export全局变量的意思
export JAVA_HOME=/opt/module/jdk1.8.0_301
# 加载到path目录下
export PATH=$PATH:$JAVA_HOME/bin
# 然后source
source /etc/profile
```

8、安装Hadoop

```
 tar -zxvf hadoop-3.2.2-src.tar.gz -C /opt/module/
 # 配置
 # HADOOP_HOME
export HADOOP_HOME=/opt/module/hadoop-3.2.2
export PATH=$PATH:$HADOOP_HOME/bin
export PATH=$PATH:$HADOOP_HOME/sbin
```

9、

（1）scp（Secure copy）安全拷贝

```
# 命令   递归   要拷贝的文件路径名称   目的地用户@主机:目的地路径/名称
```





## JDK 8

1、官网下载：jdk-8u301-linux-x64.tar.gz

2、解压，这里我们执行安装在/opt/model目录下

```
tar -zxvf jdk-8u301-linux-x64.tar.gz -C /opt/module/
```

3、配置环境变量，在/etc/profile.d/目录下

```
# 创建一个文件
sodu vim my_env.sh
# my_env.sh的内容如下
# JAVA_HOME
export JAVA_HOME=/opt/module/jdk1.8.0_301
export PATH=$PATH:$JAVA_HOME/bin
```

4、source /etc/profile 即可

5、验证是否成功输出java回车即可或者`java -version`

## SSH免密登陆



## Redis安装

（1）先把GCC安装

```
yum install gcc
```

（2）解压，`-C /opt/module/`安装到model目录下，没有model目录创建就好了

```
tar -zxvf redis-6.2.1.tar.gz -C /opt/module/
```

（3）进入解压后的redis-6.2.1目录，执行该命令：`make`（）就是把当前的redis文件编译

（4）再执行：`make install`，如果你在普通用户上就使用：`sudo make install`

（5）默认安装在`/uer/local/bin`目录下，详细文件如下

* redis-server：Redis 服务器启动命令
* redis-cli：客户端操作
* redis-benchmark：性能测试工具，可以自己本机运行，看看性能
* redis-check-aof：修复有问题的AOF文件
* redis-check-rdb
* redis-sentinel ：Redis集群

（6）启动

* 前台启动直接运行：redis-server（很少使用）
* 后台启动（常用）
  * 第一步首先：备份redis.conf，该文件在你自定义安装的目录redis-6.2.1这个目录下
  * 第二步：这里复制到`sudo cp redis.conf /etc/redis.conf`
  * 第三步：`vi redis.conf`将 daemonized no 该为 yes
  * 第四步：用刚才修改的文件启动redis，进入默认安装的位置执行/uer/local/bin下启动命令：`redis-server /etc/redis.conf`
  * 第五步：查看进程`ps -ef | grep redis`

（7）关闭

单实例关闭：redis-cli shutdown

终端里头直接：shutdown

多实例关闭并指定端口：redis-cli -p 6379 shutdown

（8）设置配置文件

* 网络相关配置该这行注释掉：#bind 127.0.0.1 -::1(默认只能本机访问，不能远程)
* 将protected-mode no 支持远程访问
* 设置密码将# requirepass foobared去掉，foobared是密码可以设置123456
* 再次启动redis然后进入客户端后需要验证：auth "你设置的密码"
* 配置日志：touch /usr/local/bin/redis-log.log，并将权限更改为`sudo chmod 666 redis-log.log`

（9）rdm工具连接





## MYSQL

[官方](https://downloads.mysql.com/archives/community/)下载，注意下载的安装包类型，版本自己选择，我这里学习使用最新版了。下载结束然后自己上传到Linux，然后按照以下步骤几分钟就搞定了。

![Snip20210824_1.png](http://ww1.sinaimg.cn/large/006FuVcvgy1gtrzi6adhoj31bk10iaoc.jpg)

1、检查Linux是否安装过mysql

```
rpm -qa | grep -i  mysql
```

2、卸载当前mysql

* 删除之前安装的mysql
  * 删除命令：`rpm -ev 需要删除的文件`
* 查找之前老版本mysql的目录、并且删除老版本mysql的文件和库
  * find / -name mysql
* 删除对应的mysql目录
  * `rm -rf 需要删除的文件`（使用该rm -rf命令要注意，血教训，我之前学习把所有所软件安装好，结果你懂的）
* 卸载后/etc/my.cnf不会删除，需要进行手工删除
  *  rm -rf /etc/my.cnf

 3、解压,如果xz格式拓展使用: tar -Jxvf 进行解压

```
tar -Jxvf mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz
```

4、移动

```
mv mysql-5.7.30-linux-glibc2.12-x86_64.tar /usr/local/mysql
```

5、创建用户组和用户并修改权限

```
mkdir -p  /data/mysql
useradd mysql
passwd mysql

# 将mysql目录的权限授给mysql用户和mysql组
chown -R mysql:mysql /usr/local/mysql
```

6、配置文件`vim /etc/my.cnf`，内容如下：

（注意：所有路径及文件名建议大家我和一样，我们主要拿来学习，所以只要安装成功就快点学习了）

```
[mysqld]
bind-address=0.0.0.0
port=3306
user=mysql
basedir=/usr/local/mysql
datadir=/data/mysql
socket=/tmp/mysql.sock
log-error=/data/mysql/mysql.err
pid-file=/data/mysql/mysql.pid
#character config
character_set_server=utf8mb4
symbolic-links=0
explicit_defaults_for_timestamp=true
```

7、初始化进入`cd /usr/local/mysql/bin/`

```
./mysqld --defaults-file=/etc/my.cnf --basedir=/usr/local/mysql/ --datadir=/data/mysql/ --user=mysql --initialize
```

8、查看随机密码（记住该密码修改密码时需要用到）

```
cat /data/mysql/mysql.err
```

9、启动修改密码

```
cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql
启动 mysql
service mysql start 或 /etc/init.d/mysql start
查看
ps -ef|grep mysql
# 查看端口占用
netstat -ntlp
```

10、登陆在/usr/local/mysql/bin下执行`./mysql -u root -p`，并且使用上面所查到了随机密码登陆。

```
[root@hadoop103 /usr/local/mysql/bin] ./mysql -u root -p
```

11、修改密码

```
mysql> ALTER USER "root"@"localhost" IDENTIFIED BY 'cathax';
mysql> FLUSH PRIVILEGES;
```

12、设置允许远程登录

```
mysql> use mysql;
mysql> update user set user.Host='%' where user.User='root';
mysql> flush privileges;
```

13、问题

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (111)
```



## 使用yum安装mysql8.0

```mysql
# 下载
wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm
# 安装 ， 然后cd /etc 目录下载会有yum.repos.d,说明OK
rpm -ivh mysql80-community-release-el7-3.noarch.rpm
# 卸载之前版本
rpm -qa | grep mariadb
rpm -e --nodeps mariadb-libs-5.5.68-1.el7.x86_64
# 使用yum安装mysql-server（必须进入/tec/yum.repos.d/目录后在执行脚本）
# 安装
yum install  mysql-server
# 启动
systemctl start mysqld.service #启动 mysql
systemctl restart mysqld.service #重启 mysql
systemctl stop mysqld.service #停止 mysql
systemctl enable mysqld.service #设置 mysql 开机启动
systemctl start mysqld
systemctl status mysqld
# 首次登陆密码
grep 'temporary passeord' /var/log/mysql.log
# 登陆
mysql -uroot -p 
# 设置密码
alter user 'root'@'localhost' identified by '123456';
# 默认设置密码是要求特殊符号，也可以自定义密码


# 远程
create user 'root'@'%' identified by '123456';
# 授权
grant all on *.* to 'root'@'%';
alter user 'root'@'%' identified with mysql_native_password by '123456';
# 5、查看编码格式
show variables like '%char%';
# 常用文件
/etc/my.cnf 　　#这是mysql的主配置文件
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
```





## Node

1、官网

2、解压

```
 tar -xJvf node-v14.17.5-linux-x64.tar.xz -C /opt/module/node
```

3、环境变量

```
# Nodejs
export PATH=/opt/module/node/node-v14.17.5-linux-x64/bin:$PATH
```

4、刷新配置文件，即可即可生效：`source /etc/profile`

5、检查是否成功：`node -v`



## Tomcat

> 安装Tomcat前提需要安装JDK8

解压

```
tar -zxvf apache-tomcat-9.0.52.tar.gz -C /opt/model/tomcat
```

配置环境变量

```
CATALINA_HOME=/opt/module/tomcat/apache-tomcat-9.0.52
export PATH=$PATH:$CATALINA_HOME/bin
```

刷新配置文件，即可即可生效：`source /etc/profile`

启动

```
./startup.sh
```

停止

```
./shutdown.sh
```

浏览器访问，访问到说明成功，如果访问不到关闭防火墙

```
http://192.168.0.190:8080/
```



## Maven

下载解压

配置环境

```
export MAVEN_HOME=/opt/module/maven/apache-maven-3.8.2
export PATH=$MAVEN_HOME/bin:$PATH 
```



配置阿里镜像

路径在所安装的位置：apache-maven-3.8.2/conf/settings.xml，添加内容

```
<localRepository>/path/to/local/repo</localRepository>
<mirrors>
    <mirror>
      <id>alimaven</id>
      <name>aliyun maven</name>
      <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
      <mirrorOf>central</mirrorOf>        
    </mirror>
  </mirrors>
```

