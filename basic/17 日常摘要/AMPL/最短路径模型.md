## week-1

### 1、简单运输模型

（1）简单运输模型包括始发站（supply points），目的站（demand points）以及运输的产品。

（2）已知条件：

* 供给量
* 需求量

栗子：假如现在有3个始发站，4个目的站，如下图：

![BE1F0428-C646-4AC3-8B41-229BA88DF767.png](http://ww1.sinaimg.cn/large/006FuVcvgy1gq6fquab3gj30i20aejsw.jpg)

单位运输成本

| 始发站/目的站 |  1   |  2   |  3   |  4   |
| :-----------: | :--: | :--: | :--: | :--: |
|       1       | 150  | 250  | 300  | 275  |
|       2       | 200  | 175  | 350  | 150  |
|       3       | 250  | 300  | 400  | 260  |

注释：始发站1——>目的站1的运输成本是150，到目的站2是250，其他依次。

（3）目标函数

在建模之前我们要清楚目标函数以及限制条件，为了满足客户需求，如何分配运输数量？使得总运输成本最小化。每一个目的站运输到目的站的数量是一个变量设为X。

（4）限时条件

* 每一个需求站点，收到的货物要满足其需求量，也就是说每个目的站收到的货物必须大于等于原来需求量（比如始发站1运输到目的站1需要大雨等于150，因为目的站1需求是150）
* 每一个供给站点，发出的货物不能超过供给量（发出来的货物不能大于原来要求的量，比如始发站1发出来的货物必须小于等于350）

（5）mode模型：

```ampl
set origin;#始发站a-c
set des;#目的站defg
param supply{origin};#不同站点不同供给量
param demend(des);#不同目的站不同需求量
param cost{origin,des};#不同始发站发往不同目的站单位成本不一样的

#声明变量（两点间运输量是未知）
var trans{origin,des}>=0;#任意始发站与任意目的站间的运量

#trans[i,j]*cost[i,j];（任意两点间运输量X任意两点间成本）是任意两点间成本
#求所有的运输成本在前面sum{i in origin,j in des}
minimize total_cost:
trans[i,j]*cost[i,j];

#限制条件
#sum{i in origin}trans[i,j]求和表示从不同始发站发出来的量必须大于等于目的站的需求量
subject to demend_limit{j in demand}:
sum{i in origin}trans[i,j]>=demand[j];#要大于ydemand[j]每各点需求量

subject to supply_limit{i in supply}:
sum{j in des}trans[i,j]<=supply[i];#发出的货物不能超过供给量
```

（6）data模型：

```ampl
#参数后面可以直接写【集合】:赋以参数（ABC后面写上对应的参数）
param:origin:supply :=
A 350
B 300
C 300;
param:des:demand :=
D 150
E 230
F 160
G 220;
param cost: D E F G :=
A 150 250 300 275
B 200 175 350 150
C 250 300 400 260;
```

### 2、多差产品容量限制运输模型

建立多产品的模型，并且需要满足两点间的运输量不能超过两点间车辆的运载量条件

已知条件

（1）两点间车辆运载量默认625

（2）三种产品Bands Coils Plate的单位运费如下

三种产品不同两点间的运输费率：

```ampl
bands产品运费率:
       FRA DET LAN WIN STL FRE LAF
GARY   30  10  8   10   11 71   6
CLEV   22  7   10  7    21 82   13
PITT   19  11  12  10   24 83   15 
```

（3）mode模型

```
set ORIG; #起始点
set DEST; #目的点
set prod; #三种产品
param supply {ORIG,prod} >= 0; #和始发站及产品有关，不同产品供应量不一样的
param demand {DEST,prod} >= 0; #不同目的站，不同产品的需求不一样
#运载量限制条件
param limit; #运载量是和两点间有关的
param cost {ORIG,DEST,prod} >= 0;
var Trans {ORIG,DEST,prod} >= 0;

minimize Total_Cost:
sum {i in ORIG,j in DEST,p in prod} cost[i,j,p] * Trans[i,j,p];
#不同始发站不同产品发往所有目的站，不能超过对应的产品的供应量
subject to Supply {i in ORIG,p in prod}:
sum {j in DEST} Trans[i,j,p] <= supply[i,p];
subject to Demand {j in DEST,p in prod}:
sum {i in ORIG} Trans[i,j,p] <= supply[i,p];

subject to capacity_limit{}i in ORIG,j in DEST:
sum {p in prod} Trans[i,j,p] <= limit;

```



```
set ORIG;#
set DEST;
set LINKS:= {i in ORIG,j in DEST};
param supply {ORIG} >= 0;
param demand {DEST} >= 0;
param cost {LINKS} >= 0;
var Trans {LINKS} >= 0;
minimize Total_Cost:
sum {(i,j) in LINKS} cost[i,j] * Trans[i,j];
subject to Supply {i in ORIG}:
sum {(i,j) in LINKS} Trans[i,j] <= supply[i];
subject to Demand {j in DEST}:
sum {(i,j) in LINKS} Trans[i,j] = demand[j];

```

（4）data模型

```
set ORIG := GARY CLEV PITT ;
set DEST := FRA DET LAN WIN STL FRE LAF ;
set prod := bands coils plate ;
param supply (tr): GARY CLEV PITT :=
				bands  400     700     800
						coils    800  1600  1800
						plate  200     300     300 ;
param demand (tr): FRA DET LAN WIN STL FRE LAF :=
					bands    300  300  100    75    650  225  250
					coils        500 750    400 250    950 850  500
					plate      100 100         0    50    200 100  250 ;
param limit :=625 ;
param cost :=
	[*,*,bands]: FRA DET LAN WIN STL FRE LAF :=
			GARY  30    10        8     10      11     71      6
			CLEV    22     7      10      7        21    82     13
			PITT     19    11      12    10      25     83     15
	[*,*,coils]: FRA DET LAN WIN STL FRE LAF :=
		GARY 39     14      11     14    16     82     8
		CLEV  27        9      12        9    26     95  17
		PITT    24     14      17      13  28     99    20

	[*,*,plate]: FRA DET LAN WIN STL FRE LAF :=
		GARY 41     15      12     16     17     86     8
		CLEV 29     9        13        9     28     99  18
    PITT 26     14      17      13     31 104    20 ;

```









（2）转运模型

（3）运输和转运结合

（4）指派模型












