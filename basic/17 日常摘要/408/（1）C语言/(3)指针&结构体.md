## 一、指针

### 1、指针概念

* 指针就是个变量，用来存放地址，地址唯一标识一块内存空间。

* 指针的大小是固定的4/8个字节（32位平台/64位平台）。

* 指针是有类型，指针的类型决定了指针的+-整数的步长，指针解引用操作的时候的权限。

* 指针的运算。

### 2、字符指针

```c
#include <stdio.h>
int main() {
    const char* p = "hello";//"hello"是个常量字符串，不能改变
    printf("%c\n",*p); 
    return 0;
}
```

比较

```c
#include <stdio.h>
int main() {
    char arr1[] = "abc";
    char arr2[] = "abc";
    char *p1 = "abc";
    char *p2 = "abc";
    //if(arr1==arr2)是不相等的
    //因为*p存放的是常量
    if (p1 == p2)
    {
        printf("ok");
    }
    else {
        printf("no");
    }
    return 0;
}
```

### 3、指针数组

其实就是存放地址的`int *arr[4] = {&a,&b,&c,&d};`：存放了a-d的地址

```c
#include <stdio.h>
int main() {
    // int arr[10] = {0};//整形数组
    // char ch[5] = {0};//字符数组
    // int *parr[4];//存放整形指针数组-指针数组 
    // char *pch[4];//存放字符指针数组-指针数组 
    int a = 12;
    int b = 14;
    int c = 45;
    int d = 67;
    int *arr[4] = {&a,&b,&c,&d};
    return 0;
}
```

### 4、数组指针

```c
#include <stdio.h>
int main() {
    char* ar1[5];
    char* (*pa)[5] = &ar1;
    int arr2[10] = {0};
    int (*pa2)[10] = &arr2;
    return 0;
}
```

打印二维数组

```c
#include <stdio.h>
void print1(int arr[3][5],int x,int y) {
    int i,j;
    for (i = 0; i < x; i++){
        for (j = 0; j < y; j++)
        {
            printf("%d",arr[i][j]);
        }
    }  
}
void print2(int (*p)[5],int x,int y) {
    int i,j;
    for (i = 0; i < x; i++){
        for (j = 0; j < y; j++)
        {
            //printf("%d ",p[i][j]);
            printf("%d ",*(*(p+i)+j));

        }
        printf("\n");
    }  
}

int main() {
    int arr1[3][5] = {{1,2,3,4,5},{1,2,3,4,5},{1,2,3,4,5}};
    //print1(arr1,3,5);
    print2(arr1,3,5);
    return 0;
}
```

```c
int arr[5]; //arr是一个5个元素整形数组
int *parr1[10]; //parr1是一个数组，数组有10个元素，每个元素的类型都是int*，parr1是指针数组
int (*parr2)[10]; //parr2是一个指针，该指针指向了一个数组，数组有10个元素，每个元素类型是int
int (*parr3[10])[5];//parr3是一个数组，该数组有10个元素，每个元素是一个数组指针，该数组指针指向的数组有5个元素，每个元素是int
```

### 5、一级指针传参

```c
#include <stdio.h>
void test1(int *p) {
}
int main() {
    int a = 10;
    int *p1 = &a;
    test1(&a);//ok
    test1(p1);//ok
    return 0;
}
```

### 6、二级指针传参

```c
#include <stdio.h>
void test1(int** p) {
    printf("num=%d\n",**p);
}
int main() {
    int a = 10;
    int *p = &a;
    int **pp = &p;
    //test1(pp);//ok
    test1(&p);//ok
    return 0;
}
```

7、函数指针

```c
//函数指针--是指向函数指针
int add(int x, int y) {
    int z = x + y;
    return z;
}
int main() {
    int (*pa)(int,int) = add;
    printf("%d\n",(*pa)(2,3));

}
```

```c
void print(char* str) {
    printf("%s\n",str);
}
int main() {
    void (*p)(char*) = print;
    (*p)("hello world");
}
```

## 二、结构体

### 1、结构体如何声明

如：声明一个结构体类型

```c
struct 标签 {
  成员变量
}s4,s5;
//s4 s5成为全局变量
//-------------------//
struct stu{
  char name[20];
  char sex[10];
  int age;
}
struct stu s2;//全局变量
int main() {
  //创建的结构变量s1
  struct stu s1;
}
```

### 2、匿名结构体指针定义

```c
struct {
  int a;
  char c;
}x;
int main () {
  
}
```

### 3、结构体的自引用

```c
#include <stdio.h>
typedef struct Node {
  int data;
  struct Node* next;
}Node;
int main() {
    //创建的结构变量
    struct Node n1;//ok
    Node n2;//ok
    return 0;
}
```

### 4、结构体的定义和初始化

```c
#include <stdio.h>
typedef struct ps {
  char c;
  int a;
  double d;
  char arr[20];
}p1;
int main() {
    struct ps s = {'c',100,3.1415,"hello world"};
    printf("%c %d %lf %s\n",s.c,s.a,s.d,s.arr);
    return 0;
}
```

### 5、结构体内存对齐

  是如何计算的呢？

* 第一个成员与结构体变量偏移量为0的地址处
* 其他成员变量要对齐到某个数字（对齐数）的整数陪的地址
* 对齐数编译器与该成员大小的较小值（vs默认8，不同编译器是不同的）
* 结构体总大小为最大对齐数的整数陪
* 如果嵌套了结构的情况，嵌套的结构体对齐到自己的最大对齐数的整数陪数，结构体的整体大小就是所有最大对齐数的整数陪。

```c
#include <stdio.h>
struct S1{
    char c1;
    int a;
    char c2;
};
struct S2{
    char c1;
    char c2;
    int a;
    //char c2;
};
int main()
{
    struct S1 s1 = {0};
    printf("%d\n",sizeof(s1));
    struct S2 s2 = {0};
    printf("%d\n",sizeof(s2));
    return 0;
}

```

### 6、结构体传参

```c
#include <stdio.h>
typedef struct S{
    int a;
    char c;
    double d;
}S;

//传值
void Print1(struct S tmp) {
    printf("%d %c %lf\n",tmp.a,tmp.c,tmp.d);
}
//传址（推荐）
void Print2(struct S *ps) {
    printf("%d %c %lf\n",ps->a,ps->c,ps->d);
}
int main()
{
    struct S s= {0};
    Print1(s);
    Print2(&s);
    return 0;
}

```

### 7、枚举

定义

```c
#include <stdio.h>
//枚举类型
enum Color {
    //枚举可能取值
    RED,GREEN,BLUE;
};
int main() {
    enum Sex s = RED;
}
```

