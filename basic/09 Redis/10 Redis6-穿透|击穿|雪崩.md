### 缓存穿透

1、缓存穿透？

2、解决方案

（1）对空值缓存：如果一个查返回的数据为空，不管该数据具体是否存在，都要把这个空值结果进行缓存，设置空结果的过期时间会很短。

（2）设置可访问的名单：使用Bitmaps类型定义一个访问名单，名单的ID作为bitmaps的偏移量，每次访问和bitmap里面的ID进行比较，如果访问不在bitmaps里面，进行拦截。

（3）采用布隆过滤器：Bloom filter，是1970年是布隆提出的，它实际上是一个很长的二进制向量(位图)和一系列随机映射函数(哈希函数)

（4）进行实时监控：当发现Redis命中率急速下降，则进行排查。



### 缓存击穿

1、什么缓存击穿？什么时候会出现缓存击穿？

当数据库访问压力瞬时增加，而Redis里面没有出现大量的key过期。是什么问题造成的呢？就是redis某个key过期了，但大量访问仍然使用这key，此时就出现缓存击穿。

2、解决方案

（1）预先设置热门数据：在redis高峰访问之前，把一些热门数据提前存入到redis里面，加大这些热门数据的key的时长。

（2）实时调整：现场监控那些数据热门，实时调整key的过期时长

（3）使用锁



### 缓存雪崩

1、什么事缓存雪崩？

数据库压力变大，导致服务器崩溃。造成原因？缓存在同一时间大面积的失效，后面请求过来的直接落到数据库上，造成数据库短时间内承受大量请求。

2、解决方案

（1）构建多级缓存架构：nginx缓存+redis缓存+其他缓存等

（2）使用锁或者队列：用锁或队列方式来保证不会有大量的线程对数据库一次性进行读写操作，但是这种效率低，不适合搞并发。

（3）设置过期标志更新缓存：记录缓存是否有过期，如果过期会触发通知另外线程在后台去更新实际key的缓存

（4）将缓存失效时间分散开：

