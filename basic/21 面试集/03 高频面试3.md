## Redis

Redis 内存满了怎么办？

（1）如何查看Redis最大占用内存？通过配置文件，默认是使用最大内存的的。

（2）一般生产上你如何配置？Redis推荐配置为最大物理内存的四分之三。（0.75）

（3）你如何设置Redis内存大小？通过配置文件或者命令的方式

配置文件：

```redis
# maxmemory <bytes> 注意转换
maxmemory 104857600
```

命令行方式：

```redis
config get maxmemory    #查看Redis内存大小
config set maxmemory 1  #设置
```

还有可以通过：`info memory`

（4）如果Redis内存满了会出现什么情况？**会出现OOM**

面试问你这个问题，其实它是想问你，当Redis满了之后，如何避免类似情况呢？此时引出内存淘汰策略。

（5）Redis 缓存淘汰策略

Redis内存淘汰策略，默认有8种。

首先了解不用淘汰策略的时候，三种不同的删除策略：

* 定时删除：对CPU不友好，用处理器性能换取存储空间
* 懒性删除：对内存不友好，用存储空间换取处理性能
* 定期删除：指定每隔一段时间执行一次删除过期键操作，采用随机抽取的策略，利用过期数据占比的方式控制删除频度，会导致很多Key到过期时间并没有被删除。

上面都有缺点，此时我们使用Redis提供的8种内存淘汰策略，版本6.2.5：

* noeviction：不会驱逐任何Key
* allkeys-lru：对所有Key使用LRU算法进行删除
* volatile-lru：对所有设置过期时间的Key使用LRU算法进行删除
* allkeys-random：对所有Key随机删除
* volatile-random：对所有设置了过期时间的Key随机删除
* volatile-ttl：删除马上要过期的Key
* allkeys-lfu：对所有Key使用LFU算法进行删除
* volatile-lfu：对所有设置了过期时间的Key使用LFU算法进行删除

> LRU means Least Recently Used #最近最少使用（时间上）
>
> LFU means Least Frequently Used #最近最少使用（频率度）

连环问：你公司使用哪一种？或你平时使用哪一种？

一般使用`allkeys-lru`，如何配置呢？通过配置文件`maxmemory-policy allkeys-lru`，或命令行方式：`config set maxmemory-policy allkeys-lru `



什么是LRU算法？

最近最少使用的数据给以淘汰，是一种常用的页面置换算法。